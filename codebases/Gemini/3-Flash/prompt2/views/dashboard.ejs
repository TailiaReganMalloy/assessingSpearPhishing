<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - BlueMind</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body style="flex-direction: column;">
    <div style="margin-bottom: 20px; color: white; display: flex; width: 800px; justify-content: space-between; align-items: center;">
        <h1>Welcome, <%= user %></h1>
        <a href="/logout" style="color: #ff9da1; text-decoration: none; font-weight: bold;">Logout</a>
    </div>

    <div class="dashboard-container">
        <h2>Your Messages</h2>
        
        <% if (messages.length === 0) { %>
            <p style="color: #666;">No messages yet.</p>
        <% } %>

        <% messages.forEach(msg => { %>
            <div class="message-box">
                <div class="message-header">
                    From: <%= msg.sender_name %> 
                    <span class="message-time">(<%= msg.timestamp %>)</span>
                </div>
                <div class="message-content">
                    <%= msg.content %>
                </div>
            </div>
        <% }) %>

        <div class="compose-box">
            <h3>Send Message</h3>
            <form action="/send-message" method="POST">
                <label for="receiver">To:</label>
                <select name="receiver_id" id="receiver" required>
                    <option value="" disabled selected>Select a user</option>
                    <% users.forEach(u => { %>
                        <option value="<%= u.id %>"><%= u.username %></option>
                    <% }) %>
                </select>

                <label for="content">Message:</label>
                <textarea name="content" id="content" rows="4" placeholder="Type your message here..." required></textarea>

                <button type="submit" class="btn-connect" style="width: auto; padding: 10px 30px;">Send Message</button>
            </form>
        </div>
    </div>
</body>
</html>
