<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Mailer - Compose</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>Secure Mailer</h1>
            <div class="user-info">
                <span><%= email %></span>
                <a href="/logout" class="btn-logout">Logout</a>
            </div>
        </header>
        
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <ul>
                <li><a href="/inbox">üì• Inbox</a></li>
                <li><a href="/compose" class="active">‚úèÔ∏è Compose</a></li>
            </ul>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h2>Compose Message</h2>
            </div>
            
            <% if (error) { %>
                <div class="error-message"><%= error %></div>
            <% } %>
            
            <div class="compose-form">
                <form method="POST" action="/send-message">
                    <div class="form-group">
                        <label for="recipientId">To:</label>
                        <select id="recipientId" name="recipientId" required>
                            <option value="">-- Select recipient --</option>
                            <% recipients.forEach(user => { %>
                                <option value="<%= user.id %>"><%= user.email %></option>
                            <% }); %>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject:</label>
                        <input 
                            type="text" 
                            id="subject" 
                            name="subject"
                            placeholder="Message subject"
                            required
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Message:</label>
                        <textarea 
                            id="message" 
                            name="message"
                            placeholder="Type your message here..."
                            rows="10"
                            required
                        ></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Send Message</button>
                        <a href="/inbox" class="btn-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </main>
    </div>
</body>
</html>
