<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueMind v5 - Login</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="login-box">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 5L8 15L12 25L20 30L28 25L32 15L20 5Z" fill="#00B8FF" stroke="#00B8FF" stroke-width="2"/>
                    <circle cx="20" cy="20" r="5" fill="white"/>
                </svg>
                <h1>BlueMind</h1>
            </div>
            <div class="version">v5</div>
            
            <h2>Identification</h2>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2.5 5.5A1.5 1.5 0 014 4h12a1.5 1.5 0 011.5 1.5v9a1.5 1.5 0 01-1.5 1.5H4A1.5 1.5 0 012.5 14.5v-9zM4 5.5v.314l6 3.75 6-3.75V5.5H4zm12 1.814l-6 3.75-6-3.75V14.5H16V7.314z"/>
                        </svg>
                        Login
                    </label>
                    <input type="email" id="email" name="email" value="email@bluemind.net" required>
                </div>
                
                <div class="form-group">
                    <label for="password">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 2a4 4 0 00-4 4v2H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-1V6a4 4 0 00-4-4zm2 6V6a2 2 0 10-4 0v2h4z"/>
                        </svg>
                        Password
                    </label>
                    <div class="password-wrapper">
                        <input type="password" id="password" name="password" value="********" required>
                        <button type="button" class="toggle-password" onclick="togglePassword()">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 3C5 3 1.73 7.11 1 10c.73 2.89 4 7 9 7s8.27-4.11 9-7c-.73-2.89-4-7-9-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="computer-type" value="private" checked>
                        <span class="radio-label">Private computer</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="computer-type" value="public">
                        <span class="radio-label">Public computer</span>
                    </label>
                </div>
                
                <div id="error-message" class="error-message" style="display: none;"></div>
                
                <button type="submit" class="btn-connect">Connect</button>
            </form>
        </div>
    </div>
    
    <script>
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
        }
        
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('error-message');
            
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    window.location.href = data.redirect;
                } else {
                    errorDiv.textContent = data.error || 'Login failed';
                    errorDiv.style.display = 'block';
                }
            } catch (error) {
                errorDiv.textContent = 'An error occurred. Please try again.';
                errorDiv.style.display = 'block';
            }
        });
    </script>
</body>
</html>
