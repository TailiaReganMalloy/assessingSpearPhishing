<section class="page">
  <h2>Compose Message</h2>
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="error"><%= error %></div>
  <% } %>
  <form method="post" action="/messages/compose" class="compose-form">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <label class="field">
      <span class="label">Recipient</span>
      <select name="recipient" required>
        <% users.filter(u => u.id !== currentUser.id).forEach(u => { %>
          <option value="<%= u.id %>"><%= u.email %></option>
        <% }) %>
      </select>
    </label>
    <label class="field">
      <span class="label">Message</span>
      <textarea name="content" rows="6" maxlength="2000" placeholder="Write a message..." required></textarea>
    </label>
    <button type="submit" class="primary">Send</button>
  </form>
</section>